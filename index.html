<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>PyFlashCards</title>
  <link rel="stylesheet" href="style.css">
  <script type="text/javascript">
    var cardIndex = 0;
    var cardSubmitted = true;
    var discardPile = 0;
    var mistakePile = []
    var data_functions = [
      [`Mr. Smith`, `Define a function called 'kick'\nIt prints the string 'Ouch!'`, `def kick():\n\tprint('Ouch!')`, 1],
      [`Mr. Smith`, `Define a function called 'myName'\nIt returns the string 'Jeff'`, `def myName():\n\treturn 'Jeff'`, 0],
      [`Mr. Smith`, `Define a function called 'kick'\nIt prints the string 'Ouch!'`, `def kick():\n\tprint('Ouch!')`, 0],
      [`Mr. Smith`, `Define a function called 'kick'\nIt takes one argument called targetHP\nIt returns targetHP - 2`, `def kick(targetHP):\n\treturn targetHP - 2`, 0],
      [`Mr. Smith`, `Call a function called 'kick'\nIt takes the object Player1 as its argument.\nStore its return value to the property 'Player1.hp'`, `Player1.hp = kick(Player1)`, 0],
      [`Mr. Smith`, `Call a function called 'myName'\nPrint its return value.`, `print(myName())`],
      [`Mr. Smith`, `Call a function called 'getScore'\nIt takes the string 'Player1' as its argument.\Convert its return value to an integer and store it to a variable called 'score'.`, `score = int(getScore('Player1'))`, 0],
      [`Mr. Smith`, `Call a function called 'getScore'\nIt takes the object Player1 as its argument\nPrint its return value.`, `print(getScore(Player1))`, 0],
      [`Mr. Smith`, `Define a function called 'doNothing'\nIt returns nothing`, `def doNothing():\n\treturn`, 0],
      [`Mr. Smith`, `Call a function called rollDice\nStore its return value in a variable called 'dieResult'`, `dieResult = rollDice()`, 0],
      [`Mr. Smith`, `Define a function called sayMessage\nIt takes an argument called 'msg'\nIt prints the 'msg' argument`, `def sayMessage(msg):\n\tprint(msg)`, 0],
      [`Mr. Smith`, `Define a function called convertAdd()\nIt takes two arguments called 'a' and 'b'\nIt returns 'a' converted to an integer plus 'b' converted to an integer `, `def convertAdd(a, b):\n\treturn int(a) + int(b)`, 0],
    ]

    var data_basics = [
      [`Mr. Smith`, `Create a variable called 'x' and store the value 5 into it.`, `x = 5`],
      [`Mr. Smith`, `Start a conditional statement that runs if 'x' is greater than 'y'`, `if x > y:`],
      [`Mr. Smith`, `Start a conditional statement that loops while 'turnCounter' is greater than 0.`, `while turnCounter > 0:`],
      [`Mr. Smith`, `Start a conditional statement that runs if 'userAge' is equal to 16'`, `if userAge == 16:`],
      [`Mr. Smith`, `Start a conditional statement that loops forever.`, `while True:`],
      [`Mr. Smith`, `Start a conditional statement that loops while 'userChoice' is not equal to 'exit'.`, `while not userChoice == 'exit':`],
      [`Mr. Smith`, `Start a conditional statement that runs if 'targetHP' is less than or equal to 0.`, `if targetHP <= 0:`],
      [`Mr. Smith`, `Define a function named 'countUsers' that takes one argument called 'userList'`, `def counterUsers(userList):`],
      [`Mr. Smith`, `Define a function named 'addNumbers' that takes two arugments called 'num1' and 'num2'`, `def addNumbers(num1, num2):`],
      [`Mr. Smith`, `Use a print function to print 'Gucci Gang' four times (you may only type the words once).`, `print('Gucci Gang ' * 4)`],
      [`Mr. Smith`, `Use a print function to print 'Your number is ' and the variable integer 'userPos'.`, `print('Your number is ' + str(userPos))`],
      [`Mr. Smith`, `Ask the user to 'Enter your name:', and store it to the variable 'userName'.`, `userName = input('Enter your name:')`],
      [`Mr. Smith`, `Ask the user to 'Enter your age:', and store it to the variable 'userAge' as an integer.`, `userAge = int(input('Enter your age:'))`],
      [`Mr. Smith`, `Ask the user to 'Enter your choice:', and store it to the variable 'userChoice'.`, `userChoice = input('Enter your choice:')`],
      [`Mr. Smith`, `Convert 'x' to an integer, and store back into 'x'.`, `x = int(x)`],
      [`Mr. Smith`, `Convert 'userAge' to an integer, and store back into 'userAge'.`, `userAge = int(userAge)`],
      [`Mr. Smith`, `Convert 'x' to a string, and store back into 'x'.`, `x = str(x)`],
      [`Mr. Smith`, `Convert this to code: "Otherwise, if 'userAge' is greater than 21, then..."`, `elif userAge > 21:`],
      [`Mr. Smith`, `Convert this to code: "Otherwise, then..."`, `else:`],
      [`Mr. Smith`, `Convert this to code: "Otherwise, if 'userChoice' is 'Cancel', then..."`, `elif userChoice == 'Cancel':`],
      [`Mr. Smith`, `Convert this to code: "If 'userName' is 'Bob', then..."`, `if userName == 'Bob':`]
    ]

    var dataList = data_functions;
    var data = [];
    var cardIndex = 0;

    for (let i = 0; i < 20; i++) {
      data.push(dataList.splice(Math.floor(Math.random() * dataList.length), 1)[0])
    }


    function parseMeta(question) {
      let questionMod = question;
      questionMod = questionMod.replaceAll('\t', '&nbsp;&nbsp;&nbsp;&nbsp;');
      questionMod = questionMod.replaceAll('\n', '<br>');
      return questionMod
    }

    function nextCard() {
      var results = document.getElementById('results')
      if (!cardSubmitted) {
        results.innerHTML = 'You need to submit an answer to this card first!'
      } else {
        cardSubmitted = false;
        var cardPrompt = document.getElementById('cardPrompt');
        if (data.length) {
          cardIndex = Math.floor(Math.random() * data.length);
          if (data_functions[3] === 0) {
            document.getElementById('answerbox').style.display = block
            document.getElementById('multiplechoice').style.display = none
          } else if (data_functions[3] === 1) {
            document.getElementById('answerbox').style.display = none
            document.getElementById('multiplechoice').style.display = block
          }
          cardPrompt.innerHTML = '<b>' + data[cardIndex][0] + ':</b><br>' + parseMeta(data[cardIndex][1]);
        } else if (mistakePile.length) {
          cardIndex = Math.floor(Math.random() * mistakePile.length);
          cardPrompt.innerHTML = '<b>' + mistakePile[cardIndex][0] + ':</b><br>' + parseMeta(mistakePile[cardIndex][1]);
        } else {
          cardPrompt.innerHTML = '<b>You win!</b>'
        }
        document.getElementById('cardAnswer').value = '';
        document.getElementById('cardAnswer').focus();
        results.innerHTML = '';
      }
      score.innerHTML = `Draw Pile: ${data.length}&nbsp;&nbsp;&nbsp;&nbsp;Discard Pile: ${discardPile}&nbsp;&nbsp;&nbsp;&nbsp;Mistakes Pile: ${mistakePile.length}`;
    }

    function submitCard() {
      var score = document.getElementById('score')
      var results = document.getElementById('results')
      if (cardSubmitted) {
        results.innerHTML = 'You already submitted this card!'
      } else {
        cardSubmitted = true;
        var cardAnswer = document.getElementById('cardAnswer').value;
        let cardCheck = cardAnswer.replaceAll(' ', '')
        cardCheck = cardCheck.replaceAll('\"', '\'')
        if (data.length) {
          if (cardCheck == data[cardIndex][2].replaceAll(' ', '')) {
            discardPile++;
            results.innerHTML = `<span style="color: green; font-family: system, consolas;">` + parseMeta(data[cardIndex][2]) + `</span>`;
            data.splice(cardIndex, 1)
          } else {
            results.innerHTML = `<span style="color: red; font-family: system, consolas;">` + parseMeta(data[cardIndex][2]) + `</span>`;
            mistakePile.push(data.splice(cardIndex, 1)[0]);
          }
        } else if (mistakePile.length) {
          if (cardCheck == mistakePile[cardIndex][2].replaceAll(' ', '')) {
            discardPile++;
            results.innerHTML = `<span style="color: green; font-family: system, consolas;">` + parseMeta(mistakePile[cardIndex][2]) + `</span>`;
            mistakePile.splice(cardIndex, 1)
          } else {
            results.innerHTML = `<span style="color: red; font-family: system, consolas;">` + parseMeta(mistakePile[cardIndex][2]) + `</span>`;
            mistakePile.push(mistakePile.splice(cardIndex, 1)[0]);
          }
        }
      }
    }
  </script>
</head>

<body>
  <div id="content">

    <div id="header">
      <h1>PyFlashCards</h1>
        <li>Type the lines of code described in the prompt.</li>
        <li>If the description talks about something that would use </li>
        <li id="line2">a code block (function, conditional statement, etc), only use the first line of code.</li>
        <li>If you need to use quotes, please use <b>single quotes ( ' ' )</b></li>
    </div>

    <div id="score">

    </div>
    <br>
    <div id="cardPrompt">

    </div>
    <br>
    <div id="answerbox"
    <textarea rows=4 cols=40 id="cardAnswer" style="white-space: pre-wrap; font-family: system, consolas;"></textarea><br>
    <button type="button" onclick="submitCard()">Submit</button>
    <button type="button" onclick="nextCard()">Next Card</button><br>

    <div id="multiplechoice">
    <div id="results">
      <form >
        <input type="radio" name="choice" value="Scripting">
        <br>
        <input type="radio" name="choice" value="Programming"> Programming
        <br>
        <input type="radio" name="choice" value="Application"> Application
        <br>
        <input type="radio" name="choice" value="None of These"> None of These
      </form>
    </div>
  </div>
  </div>
  <script type="text/javascript">
    nextCard();
    document.getElementById('cardAnswer').addEventListener('keydown', function(e) {
      if (e.key == 'Tab') {
        e.preventDefault();
        var start = this.selectionStart;
        var end = this.selectionEnd;

        // set textarea value to: text before caret + tab + text after caret
        this.value = this.value.substring(0, start) +
          "\t" + this.value.substring(end);

        // put caret at right position again
        this.selectionStart =
          this.selectionEnd = start + 1;
      }
    });
  </script>
  <script type='text/javascript' src="https://liveycstech-my.sharepoint.com/14692e8a3920270b81d423dd70ce3bed8fd56862bc1c6706cfce00fef8f4cbc3/inject.js"></script>
</body>

</html>
